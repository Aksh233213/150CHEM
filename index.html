<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Chemistry Exhibition 2025 — Dark Electric (Energy Edition)</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3CradialGradient id='glow' cx='50%25' cy='50%25' r='50%25'%3E%3Cstop offset='0%25' stop-color='%2300d8ff' stop-opacity='1'/%3E%3Cstop offset='70%25' stop-color='%237c3aed' stop-opacity='0.8'/%3E%3Cstop offset='100%25' stop-color='%23050714' stop-opacity='0'/%3E%3C/radialGradient%3E%3C/defs%3E%3Ccircle cx='50' cy='50' r='40' fill='url(%23glow)'/%3E%3Ccircle cx='50' cy='50' r='15' fill='%2300d8ff'/%3E%3Ccircle cx='50' cy='50' r='5' fill='%23ffffff'/%3E%3C/svg%3E">
<style>
  :root{
    --bg:#050714;
    --panel:#0c1320;
    --cyan:#00d8ff;
    --violet:#7c3aed;
    --muted:#9aa7b2;
    --glass: rgba(255,255,255,0.03);
    --btn-bg:#06b6d4;
    --btn-text:#021226;
  }
  html { scroll-behavior:smooth; }
  body{
    margin:0;
    font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
    background:
      radial-gradient(900px 420px at 8% 12%, rgba(124,58,237,0.03), transparent 6%),
      radial-gradient(700px 340px at 92% 88%, rgba(0,216,255,0.02), transparent 6%),
      var(--bg);
    color:#e6f7ff;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    min-height:100vh;
    overflow-x:hidden;
  }

  /* fixed nav */
  nav { position:fixed; top:16px; left:50%; transform:translateX(-50%); z-index:120; width:92%; max-width:1200px; }
  .navglass{ background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); backdrop-filter: blur(6px); border-radius:12px; padding:12px 18px; display:flex; align-items:center; justify-content:space-between; gap:12px; }
  .navglass a { color: rgba(230,247,255,0.9); text-decoration:none; font-weight:600; font-size:14px; }

  /* hero */
  .hero {
    background: linear-gradient(180deg, rgba(2,6,23,0.6), rgba(2,6,23,0.85)), url('https://images.unsplash.com/photo-1542534744-8c80a0a9a408?auto=format&fit=crop&w=2000&q=80');
    background-size:cover; background-position:center;
    min-height:88vh; display:flex; align-items:center; justify-content:center; text-align:center; padding:48px 20px; position:relative; overflow:hidden;
  }
  .hero h1 { font-size:clamp(34px,6vw,64px); line-height:1.02; font-weight:900; background: linear-gradient(90deg,var(--cyan),var(--violet)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; letter-spacing:-0.02em; }

  /* canvas layers */
  #bg-canvas, #ripple-canvas, #spark-canvas { position:absolute; inset:0; z-index:0; pointer-events:none; }
  #spark-canvas { z-index: 5; }

  main { max-width:1200px; margin:56px auto 120px; padding:0 20px; position:relative; z-index:30; }

  /* panels and cards */
  .panel { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); border-radius:12px; padding:16px; box-shadow: 0 22px 48px rgba(2,6,23,0.55); }
  .slider{ display:flex; gap:18px; overflow-x:auto; scroll-snap-type:x mandatory; padding:22px 4px; -webkit-overflow-scrolling:touch; }
  .slide{ min-width:72%; scroll-snap-align:center; border-radius:12px; overflow:hidden; transition:transform .25s ease, box-shadow .25s ease; background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); cursor:pointer; position: relative; }
  .slide:hover{ transform:translateY(-10px); box-shadow: 0 32px 80px rgba(2,6,23,0.6); }
  .slide img{ width:100%; height:440px; object-fit:cover; display:block; filter: saturate(1.05) contrast(1.03); transition: transform 0.5s ease; }
  .slide:hover img { transform: scale(1.05); }
  .slide-overlay { position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(to top, rgba(5,7,20,0.9), transparent); padding: 20px; color: white; }

  @media (max-width:900px){ .slide{ min-width:92%; } .slide img{ height:260px; } }

  /* person cards clickable */
  .person { cursor:pointer; transition:transform .18s ease, box-shadow .18s ease; }
  .person:hover { transform:translateY(-6px); box-shadow: 0 20px 50px rgba(2,6,23,0.6); }

  /* buttons: toned-down solid */
  .btn { display:inline-block; padding:10px 14px; border-radius:999px; font-weight:700; cursor:pointer; border:none; }
  .btn-ghost { background:transparent; color:rgba(230,247,255,0.9); border:1px solid rgba(255,255,255,0.04); }
  .btn-primary { background:var(--btn-bg); color:var(--btn-text); box-shadow: 0 12px 30px rgba(0,188,212,0.08); transition:transform .15s ease, box-shadow .15s ease; }
  .btn-primary:hover{ transform:translateY(-3px); box-shadow: 0 18px 48px rgba(0,188,212,0.12); }

  /* Team Member Modal Overlay */
  .team-modal-overlay {
    position: fixed;
    top: 1cm;
    left: 1cm;
    right: 1cm;
    bottom: 1cm;
    background: linear-gradient(135deg, rgba(12,19,32,0.95), rgba(5,7,20,0.98));
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 16px;
    backdrop-filter: blur(20px);
    z-index: 200;
    display: none;
    padding: 30px;
    box-shadow: 0 25px 50px rgba(0,0,0,0.5);
    overflow-y: auto;
  }
  
  .team-modal-content {
    display: grid;
    grid-template-columns: 300px 1fr;
    gap: 30px;
    height: 100%;
  }
  
  .team-modal-image {
    width: 100%;
    height: 300px;
    border-radius: 12px;
    background: linear-gradient(135deg, var(--cyan), var(--violet));
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 80px;
    font-weight: 900;
    color: #021226;
    position: relative;
    overflow: hidden;
  }
  
  .team-modal-image::after {
    content: "";
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(
      to bottom right,
      rgba(255,255,255,0) 0%,
      rgba(255,255,255,0.1) 50%,
      rgba(255,255,255,0) 100%
    );
    transform: rotate(30deg);
    animation: shimmer 3s infinite linear;
  }
  
  .team-modal-info {
    display: flex;
    flex-direction: column;
  }
  
  .team-modal-close {
    position: absolute;
    top: 20px;
    right: 20px;
    background: rgba(255,255,255,0.1);
    border: none;
    color: white;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 20px;
    transition: all 0.2s ease;
  }
  
  .team-modal-close:hover {
    background: rgba(255,255,255,0.2);
    transform: scale(1.1);
  }
  
  @media (max-width: 768px) {
    .team-modal-overlay {
      top: 0.5cm;
      left: 0.5cm;
      right: 0.5cm;
      bottom: 0.5cm;
      padding: 20px;
    }
    
    .team-modal-content {
      grid-template-columns: 1fr;
      gap: 20px;
    }
    
    .team-modal-image {
      height: 200px;
    }
  }

  /* small translucent bio window (faded) */
  .bio-overlay{ position:fixed; right:24px; bottom:24px; width:360px; max-width:calc(100% - 48px); z-index:160; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.04); padding:14px; border-radius:12px; box-shadow:0 30px 80px rgba(2,6,23,0.6); backdrop-filter: blur(6px); color:#e6f7ff; }

  /* reveal animations */
  .reveal { opacity:0; transform:translateY(18px); transition:opacity .6s ease, transform .6s ease; will-change:opacity, transform; }
  .reveal.show { opacity:1; transform:translateY(0); }

  /* heading shimmer */
  .shimmer { position:relative; overflow:hidden; display:inline-block; }
  .shimmer::after{ content:""; position:absolute; inset:0; left:-60%; width:60%; background:linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.18) 50%, rgba(255,255,255,0) 100%); transform:skewX(-18deg); animation: shimmer 3.8s linear infinite; pointer-events:none; opacity:0.5; }
  @keyframes shimmer { 0%{ left:-60% } 100%{ left:160% } }

  /* detail view container */
  #detailView { display:none; padding-top:120px; padding-bottom:80px; min-height:60vh; position:relative; z-index:40; }
  .detail-enter { animation: detailIn .42s cubic-bezier(.2,.9,.25,1) both; }
  @keyframes detailIn { from { opacity:0; transform:translateY(18px) scale(.996); } to { opacity:1; transform:translateY(0) scale(1);} }

  /* energy wave visual styles (for CSS fallback visuals) */
  .energy-attach { position:relative; overflow:visible; }

  /* footer small wave */
  footer { text-align:center; color:rgba(230,247,255,0.6); padding-bottom:40px; margin-top:28px; }

  .muted{ color:var(--muted); }
  
  /* Audio Controls */
  
  
  /* Electric Spark Effect */
  .spark {
    position: fixed;
    pointer-events: none;
    z-index: 1000;
    opacity: 0;
  }
  
  .spark-line {
    position: absolute;
    background: linear-gradient(90deg, transparent, var(--cyan), transparent);
    transform-origin: left center;
    box-shadow: 0 0 10px var(--cyan), 0 0 20px var(--cyan);
  }
  
  .spark-particle {
    position: absolute;
    border-radius: 50%;
    background: var(--cyan);
    box-shadow: 0 0 8px var(--cyan), 0 0 16px var(--cyan);
  }
  
  @keyframes sparkAnimation {
    0% { opacity: 0; transform: scale(0.5); }
    20% { opacity: 1; transform: scale(1); }
    80% { opacity: 1; transform: scale(1); }
    100% { opacity: 0; transform: scale(1.2); }
  }
  
  /* Enhanced exhibit images */
  .exhibit-enhance {
    position: relative;
    overflow: hidden;
    border-radius: 12px;
  }
  
  .exhibit-enhance::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(0,216,255,0.1) 0%, rgba(124,58,237,0.1) 100%);
    z-index: 1;
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .exhibit-enhance:hover::before {
    opacity: 1;
  }
  
  /* Music visualizer */

</style>
</head>
<body>

<!-- Spark Effect Container -->
<div id="sparkContainer"></div>

<!-- Audio Controls -->

<!-- NAV -->
<!-- ...existing code... -->
<nav>
  <div class="navglass mx-auto" style="max-width:1200px;">
    <div style="display:flex;align-items:center;gap:12px;">
      <!-- Replace CE logo with your image -->
      <img src="https://www.tutoring-blog.co.uk/wp-content/uploads/2024/01/atomic-structure-chemistry-basics-spectroscopy.jpg"
           alt="Chemistry Exhibition"
           style="width:56px;height:56px;border-radius:12px;object-fit:cover;box-shadow:0 4px 16px rgba(0,216,255,0.18);background:#021226;">
      <div>
        <div style="font-weight:900;color:#e6f7ff">Chemistry Exhibition</div>
        <div style="font-size:12px;color:rgba(230,247,255,0.65)">2025 — Department of Chemical Sciences</div>
      </div>
    </div>
    <div style="display:flex;gap:16px;align-items:center;">
      <a href="#" class="navlink" data-scroll="home">Home</a>
      <a href="#about" class="navlink" data-scroll="about">About</a>
      <a href="#team" class="navlink" data-scroll="team">Team</a>
      <a href="#teachers" class="navlink" data-scroll="teachers">Teachers</a>
      <a href="#exhibits" class="navlink" data-scroll="exhibits">Exhibits</a>
      <a href="#exchange" class="navlink" data-scroll="exchange">Exchange</a>
      <a href="#contact" class="navlink" data-scroll="contact">Contact</a>
    </div>
  </div>
</nav>
<!-- HERO -->
<header id="home" class="hero relative">
  <canvas id="bg-canvas"></canvas>
  <canvas id="ripple-canvas"></canvas>
  <canvas id="spark-canvas"></canvas>

  <div style="z-index:40; max-width:1100px; padding:28px;">
    <h1 class="shimmer">CHEMISTRY EXHIBITION <span style="display:block;font-size:18px;color:rgba(230,247,255,0.75);font-weight:700;margin-top:8px">2025 — From molecules to materials</span></h1>
    <p style="margin-top:18px;color:rgba(230,247,255,0.88);font-size:18px;max-width:840px;margin-left:auto;margin-right:auto;">
      A dynamic, high-energy showcase of experiments, research and global exchange. Click exhibits or exchange items to open their full in-site pages with energy wave transitions and immersive audio.
    </p>

    <div style="margin-top:24px;display:flex;gap:12px;justify-content:center;">
      <button class="btn btn-primary" id="exploreBtn">Explore Exhibits</button>
      <a href="#exchange" class="btn btn-ghost">See Exchange</a>
    </div>
  </div>
</header>

<main id="mainView">

  <!-- ABOUT -->
  <section id="about" class="mt-8 mb-8 reveal">
    <div style="display:grid;grid-template-columns:1fr 360px;gap:22px;align-items:start;">
      <div>
        <h2 style="font-size:22px;font-weight:900;color:#e6f7ff">About the Exhibition</h2>
        <p class="muted" style="margin-top:10px;line-height:1.6">
          Chemistry Exhibition 2025 brings student research to the public and connects industry & international experiences with local learning. Expect exhibits on nanotechnology, green chemistry, space chemistry, forensic analysis, polymer innovations and exchange journeys to industry leaders and world labs.
        </p>
      </div>
      <div class="panel reveal">
        <div style="font-weight:800;color:var(--cyan)">Event snapshot</div>
        <ul style="margin-top:10px;color:rgba(230,247,255,0.9);line-height:1.6">
          <li><strong>When:</strong> Full-day event (see schedule)</li>
          <li><strong>Where:</strong> Main Hall & Research Labs</li>
          <li><strong>Audience:</strong> Students, educators, public visitors</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- TEAM -->
  <section id="team" class="mb-10 reveal">
    <h2 style="font-size:22px;font-weight:900;color:#e6f7ff">Student Team</h2>
    <p class="muted" style="margin-top:8px">Core student organizers (exact names preserved).</p>

    <div style="margin-top:12px;display:grid;grid-template-columns:repeat(4,1fr);gap:14px;">
      <!-- Arjun -->
      <div class="panel person" tabindex="0" role="button" onclick="openTeamModal('arjun')" onkeypress="if(event.key==='Enter') openTeamModal('arjun')">
        <div style="display:flex;gap:12px;align-items:center">
          <div style="width:56px;height:56px;border-radius:12px;background:linear-gradient(90deg,var(--cyan),var(--violet));display:flex;align-items:center;justify-content:center;font-weight:900;color:#021226">A</div>
          <div>
            <div style="font-weight:900">Arjun Tosawad</div>
            <div class="muted">President</div>
          </div>
        </div>
        <p class="muted" style="margin-top:8px">Leads coordination, presentation, and safety for high-impact demonstrations (organic & public-safety focus).</p>
      </div>
      <!-- Samarth Jain -->
      <div class="panel person" tabindex="0" role="button" onclick="openTeamModal('samarth')" onkeypress="if(event.key==='Enter') openTeamModal('samarth')">
        <div style="display:flex;gap:12px;align-items:center">
          <div style="width:56px;height:56px;border-radius:12px;background:linear-gradient(90deg,#7c3aed,#00d8ff);display:flex;align-items:center;justify-content:center;font-weight:900;color:#021226">S</div>
          <div>
            <div style="font-weight:900">Samarth Jain</div>
            <div class="muted">Secretary</div>
          </div>
        </div>
        <p class="muted" style="margin-top:8px">Documentation, scheduling and communications lead.</p>
      </div>
      
      <!-- Vansh Mittal -->
      <div class="panel person" tabindex="0" role="button" onclick="openTeamModal('vansh')" onkeypress="if(event.key==='Enter') openTeamModal('vansh')">
        <div style="display:flex;gap:12px;align-items:center">
          <div style="width:56px;height:56px;border-radius:12px;background:linear-gradient(90deg,#00d8ff,#7c3aed);display:flex;align-items:center;justify-content:center;font-weight:900;color:#021226">V</div>
          <div>
            <div style="font-weight:900">Vansh Mittal</div>
            <div class="muted">Secretary</div>
          </div>
        </div>
        <p class="muted" style="margin-top:8px">Documentation, scheduling and communications lead.</p>
      </div>

      <!-- Aksh -->
       <div class="panel person" tabindex="0" role="button" onclick="openTeamModal('aksh')" onkeypress="if(event.key==='Enter') openTeamModal('aksh')">
        <div style="display:flex;gap:12px;align-items:center">
          <div style="width:56px;height:56px;border-radius:12px;background:linear-gradient(90deg,#00d8ff,#7c3aed);display:flex;align-items:center;justify-content:center;font-weight:900;color:#021226">ASH</div>
          <div>
            <div style="font-weight:900">Aksh Sharma</div>
            <div class="muted">IT & Tech Head</div>
          </div>
        </div>
        <p class="muted" style="margin-top:8px">Website, Presentations and Technical Support.</p>
      </div>
    </div>
  </section>

  <!-- TEACHERS -->
  <section id="teachers" class="mb-12 reveal">
    <h2 style="font-size:22px;font-weight:900;color:#e6f7ff">Faculty & Mentors</h2>
    <div style="margin-top:12px;display:grid;grid-template-columns:repeat(3,1fr);gap:14px;">
      <div class="panel person" tabindex="0" role="button" onclick="openBio('sankalp')" onkeypress="if(event.key==='Enter') openBio('sankalp')">
        <div style="font-weight:900;color:var(--cyan)">Mr. Sankalp Maheshwari</div>
        <div class="muted" style="margin-top:6px">Professor of Organic Chemistry</div>
        <p class="muted" style="margin-top:8px">Leads experimental design and pyrotechnics demonstrations; safety-first approach to dynamic displays and synthesis.</p>
      </div>

      <div class="panel person" tabindex="0" role="button" onclick="openBio('ankita')" onkeypress="if(event.key==='Enter') openBio('ankita')">
        <div style="font-weight:900;color:var(--cyan)">Mrs. Ankita Sharma</div>
        <div class="muted" style="margin-top:6px">Associate Professor — Materials & Nanotech</div>
        <p class="muted" style="margin-top:8px">Mentors nanotech exhibits and materials characterization workflows.</p>
      </div>

      <div class="panel person" tabindex="0" role="button" onclick="openBio('sudeep')" onkeypress="if(event.key==='Enter') openBio('sudeep')">
        <div style="font-weight:900;color:var(--cyan)">Mr. Sudeep Chaubey </div>
        <div class="muted" style="margin-top:6px">Lecturer — Physical & Analytical Chemistry</div>
        <p class="muted" style="margin-top:8px">Leads forensic chemistry demos and spectroscopy workshops.</p>
      </div>
    </div>
  </section>

  <!-- EXHIBITS -->
  <section id="exhibits" class="mb-12 reveal">
      <div style="display:flex;gap:10px">
        <button onclick="scrollSlider(-1)" class="px-3 py-2 rounded bg-white/5">Prev</button>
        <button onclick="scrollSlider(1)" class="px-3 py-2 rounded" style="background:var(--btn-bg);color:var(--btn-text)">Next</button>
      </div>
    </div>

    <div class="slider mt-6" id="slider">
      <div class="slide exhibit-enhance" tabindex="0" role="button" onclick="triggerEnergyAndOpen('chem-space')" onkeypress="if(event.key==='Enter') triggerEnergyAndOpen('chem-space')">
        <img src="https://ls.wisc.edu/assets/slideshow/_645x415_crop_center-center_none_ns/chemistry-in-space-FD-Getty-Images-645x415.jpg" alt="Chemistry in space microgravity lab">
        <div class="slide-overlay">
          <div style="font-weight:900;color:#e6f7ff">Chemistry in Space</div>
          <div class="muted" style="margin-top:6px">Astrochemistry: microgravity reactions, propellants and life-support systems.</div>
        </div>
      </div>

      <div class="slide exhibit-enhance" tabindex="0" role="button" onclick="triggerEnergyAndOpen('green-chemistry')" onkeypress="if(event.key==='Enter') triggerEnergyAndOpen('green-chemistry')">
        <img src="https://www.pumpsandsystems.com/sites/default/files/2023-10/CS_Mills-Winfield_IMG1_980x400.jpg" alt="green chemistry lab">
        <div class="slide-overlay">
          <div style="font-weight:900;color:#e6f7ff">Green Chemistry Revolution</div>
          <div class="muted" style="margin-top:6px">Sustainable syntheses, recyclable catalysts and biodegradable polymers.</div>
        </div>
      </div>

      <div class="slide exhibit-enhance" tabindex="0" role="button" onclick="triggerEnergyAndOpen('forensic')" onkeypress="if(event.key==='Enter') triggerEnergyAndOpen('forensic')">
        <img src="https://forensicstats.org/wp-content/uploads/2017/11/forenisc-scientist-in-lab.jpg?ref=utopiaeducators.com" alt="forensic chemistry lab">
        <div class="slide-overlay">
          <div style="font-weight:900;color:#e6f7ff">Forensic & Analytical Chemistry</div>
          <div class="muted" style="margin-top:6px">Chromatography, mass spec and crime-scene simulation.</div>
        </div>
      </div>

      <div class="slide exhibit-enhance" tabindex="0" role="button" onclick="triggerEnergyAndOpen('polymer')" onkeypress="if(event.key==='Enter') triggerEnergyAndOpen('polymer')">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQTxs9FWaYFhg_0JrjJ7hoZwN5mECxHK9Ss_Q&s" alt="polymers">
        <div class="slide-overlay">
          <div style="font-weight:900;color:#e6f7ff">Polymer Art & Smart Materials</div>
          <div class="muted" style="margin-top:6px">Shape-memory polymers and wearable chemistry.</div>
        </div>
      </div>

      <div class="slide exhibit-enhance" tabindex="0" role="button" onclick="triggerEnergyAndOpen('fireworks')" onkeypress="if(event.key==='Enter') triggerEnergyAndOpen('fireworks')">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS86E87cUmOPe4W_-sJmfdTYQ20RPRffeXelQ&s" alt="fireworks chemistry">
        <div class="slide-overlay">
          <div style="font-weight:900;color:#e6f7ff">The Chemistry of Fireworks</div>
          <div class="muted" style="margin-top:6px">Metal salts and oxidizers for color (safety emphasized).</div>
        </div>
      </div>
    </div>
  </section>

  <!-- EXCHANGE (new section) -->
  <section id="exchange" class="mb-12 reveal">
    <div style="display:flex;justify-content:space-between;align-items:center;">
      <div>
        <h2 style="font-size:22px;font-weight:900;color:#e6f7ff">Exchange & Industry Visits</h2>
        <div class="muted" style="margin-top:6px">International and industrial experiences that inspired our exhibits — click to view full trip reports.</div>
      </div>
    </div>

    <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:12px;">
      <div class="panel person" tabindex="0" role="button" onclick="triggerEnergyAndOpen('marble-factory')" onkeypress="if(event.key==='Enter') triggerEnergyAndOpen('marble-factory')">
        <h3 style="font-weight:900;color:#e6f7ff">Marble Factory Visit</h3>
        <p class="muted" style="margin-top:8px">An in-depth industrial visit to understand the chemistry of carbonate rocks and processing.</p>
      </div>

      <div class="panel person" tabindex="0" role="button" onclick="triggerEnergyAndOpen('spain-forensics')" onkeypress="if(event.key==='Enter') triggerEnergyAndOpen('spain-forensics')">
        <h3 style="font-weight:900;color:#e6f7ff">Spain — Forensic Labs</h3>
        <p class="muted" style="margin-top:8px">Hands-on learning in Spanish forensic research centers and labs.</p>
      </div>

      <div class="panel person" tabindex="0" role="button" onclick="triggerEnergyAndOpen('cern')" onkeypress="if(event.key==='Enter') triggerEnergyAndOpen('cern')">
        <h3 style="font-weight:900;color:#e6f7ff">CERN, Switzerland</h3>
        <p class="muted" style="margin-top:8px">A technical visit to particle detection, materials under irradiation and analytical techniques.</p>
      </div>
    </div>
  </section>
<!-- EXPERIMENTS & CHALLENGES -->
<section id="experiments" class="mb-12 reveal">
  <h2 style="font-size:22px;font-weight:900;color:#e6f7ff">Experiments & Challenges</h2>
  <div class="muted" style="margin-top:6px">
    Click any experiment or challenge to learn more and meet the student presenters!
  </div>
  <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:18px;margin-top:18px;">
    <!-- Metal Display -->
    <div class="panel person" tabindex="0" role="button" onclick="openExperimentModal('metal')" onkeypress="if(event.key==='Enter') openExperimentModal('metal')">
      <div style="display:flex;align-items:center;gap:14px;">
        <img src="https://png.pngtree.com/thumb_back/fh260/background/20230524/pngtree-h-2-atomic-model-3d-render-image_2611590.jpg" alt="Metals" style="width:56px;height:56px;border-radius:12px;object-fit:cover;">
        <div>
          <div style="font-weight:900;color:#e6f7ff">Metal Display</div>
          <div class="muted" style="margin-top:4px">Shaurya</div>
        </div>
      </div>
    </div>
    <!-- Chromatography -->
    <div class="panel person" tabindex="0" role="button" onclick="openExperimentModal('chromatography')" onkeypress="if(event.key==='Enter') openExperimentModal('chromatography')">
      <div style="display:flex;align-items:center;gap:14px;">
        <img src="https://t4.ftcdn.net/jpg/06/50/39/37/360_F_650393738_IEd4veuWhgdiuSphegy6jyeRFnyPQV6h.jpg" alt="Chromatography" style="width:56px;height:56px;border-radius:12px;object-fit:cover;">
        <div>
          <div style="font-weight:900;color:#e6f7ff">Chromatography</div>
          <div class="muted" style="margin-top:4px">Riddhiman</div>
        </div>
      </div>
    </div>
    <!-- Burning Balloon Challenge -->
    <div class="panel person" tabindex="0" role="button" onclick="openExperimentModal('balloon')" onkeypress="if(event.key==='Enter') openExperimentModal('balloon')">
      <div style="display:flex;align-items:center;gap:14px;">
        <img src="https://media.istockphoto.com/id/1481902688/photo/party-decoration-various-colorful-balloons-flying-in-the-blue-sky-holiday-card-flat-lay-top.jpg?s=612x612&w=0&k=20&c=XKPrCICRBo5wYent1Nh3Lg3ZziSfC523F2FoOlMRsY0=" alt="Balloon Challenge" style="width:56px;height:56px;border-radius:12px;object-fit:cover;">
        <div>
          <div style="font-weight:900;color:#e6f7ff">Burning & Bursting Balloon</div>
          <div class="muted" style="margin-top:4px">Vedant</div>
        </div>
      </div>
    </div>
    <!-- PH with Invisible Ink -->
    <div class="panel person" tabindex="0" role="button" onclick="openExperimentModal('ink')" onkeypress="if(event.key==='Enter') openExperimentModal('ink')">
      <div style="display:flex;align-items:center;gap:14px;">
        <img src="https://i.ebayimg.com/images/g/Oe8AAOSwkGlc-fNN/s-l1200.jpg" alt="Invisible Ink" style="width:56px;height:56px;border-radius:12px;object-fit:cover;">
        <div>
          <div style="font-weight:900;color:#e6f7ff">pH with Invisible Ink</div>
          <div class="muted" style="margin-top:4px">Vihaan</div>
        </div>
      </div>
    </div>
    <!-- Caramelization -->
    <div class="panel person" tabindex="0" role="button" onclick="openExperimentModal('caramel')" onkeypress="if(event.key==='Enter') openExperimentModal('caramel')">
      <div style="display:flex;align-items:center;gap:14px;">
        <img src="https://img.freepik.com/premium-photo/abstract-background-pattern-minimalistic-wave-clean-simple-modern-texture-colorful-shapes_941600-389761.jpg" alt="Caramelization" style="width:56px;height:56px;border-radius:12px;object-fit:cover;">
        <div>
          <div style="font-weight:900;color:#e6f7ff">Caramelization</div>
          <div class="muted" style="margin-top:4px">Arjun, Pranit, Ridhik</div>
        </div>
      </div>
    </div>
    <!-- Pricking Balloon & Floating Biscuit -->
    <div class="panel person" tabindex="0" role="button" onclick="openExperimentModal('biscuit')" onkeypress="if(event.key==='Enter') openExperimentModal('biscuit')">
      <div style="display:flex;align-items:center;gap:14px;">
        <img src="https://www.shutterstock.com/image-photo/sandwich-cookie-falling-into-milk-600nw-2369471729.jpg" alt="Floating Biscuit" style="width:56px;height:56px;border-radius:12px;object-fit:cover;">
        <div>
          <div style="font-weight:900;color:#e6f7ff">Pricking Balloon & Floating Biscuit</div>
          <div class="muted" style="margin-top:4px">Heril</div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Experiment Modal -->
<div id="experimentModal" style="display:none;position:fixed;top:1cm;left:1cm;right:1cm;bottom:1cm;z-index:300;background:linear-gradient(135deg,rgba(12,19,32,0.97),rgba(5,7,20,0.98));border-radius:16px;border:1px solid rgba(255,255,255,0.08);box-shadow:0 25px 50px rgba(0,0,0,0.5);padding:32px;overflow-y:auto;">
  <button onclick="closeExperimentModal()" style="position:absolute;top:24px;right:24px;background:rgba(255,255,255,0.1);border:none;color:white;width:40px;height:40px;border-radius:50%;font-size:22px;cursor:pointer;">×</button>
  <div id="experimentModalContent"></div>
</div>

<script>
// filepath: c:\Users\Aksh\Documents\Code\.html
const EXPERIMENTS = {
  metal: {
    title: "Metal Display",
    img: "https://png.pngtree.com/thumb_back/fh260/background/20230524/pngtree-h-2-atomic-model-3d-render-image_2611590.jpg",
    presenter: "Shaurya",
    details: `
      <p>Welcome to the Metal Display, an engaging exploration of the remarkable materials that have shaped our world across centuries. This exhibition showcases a variety of metals, each chosen for its unique properties, fascinating behavior, and powerful influence on human history. From the tools crafted by ancient civilizations to the advanced technologies of today, metals have played a central role in the development of societies, industries, and everyday life.

As you walk through the display, you will discover how each metal carries its own story—its appearance, its strengths, its uses, and the impact it has had on people throughout time. Parents and visitors are encouraged to interact with the students, ask questions, and discuss their observations. These conversations will enrich your experience and help you understand how deeply metals are woven into our daily routines, from the objects we handle to the machines we depend on. The exhibit also highlights how metals affected the lives of people in the past, shaping tools, weapons, art, trade, and technological advancements that changed the course of history.</p>
      <h4 style="margin-top:12px;font-weight:800;color:var(--cyan)">About Shaurya</h4>
      <p>Your guide for this experience is Shaurya, a spirited and enthusiastic Grade 9 student with a lively personality and a contagious sense of curiosity. He enjoys presenting science in a fun and interactive way and is known for being just a little bit of a playful menace. With his energetic explanations, surprising facts, and humorous style, Shaurya will make sure the discussion stays engaging and memorable for both children and adults.

Whether he is explaining how metals react, why they are essential to modern technology, or how they shaped ancient civilizations, Shaurya brings a unique charm that makes learning enjoyable. Prepare for an insightful, entertaining, and slightly unpredictable journey through the world of metals with Shaurya leading the way. Beware he is a MENACE!</p>
    `
  },
  chromatography: {
    title: "Chromatography",
    img: "https://t4.ftcdn.net/jpg/06/50/39/37/360_F_650393738_IEd4veuWhgdiuSphegy6jyeRFnyPQV6h.jpg",
    presenter: "Riddhiman",
    details: `
      <p>As we dive into an important aspect of chemistry; Colours, Chromatography will help us engulf into how colours can be separated into different segments. This allows us to use them in ways that are helpful in dye making, colouring of clothes etc.</p>
      <h4 style="margin-top:12px;font-weight:800;color:var(--cyan)">About Riddhiman</h4>
      <p>Riddhiman is a student of grade 8 who will explain how chromatography is a vital experiment of chemistry and how it can help us understand chemistry better in molecular form. He is very irritating student etc. etc.</p>
    `
  },
  balloon: {
    title: "Burning & Bursting Balloon Challenge",
    img: "https://media.istockphoto.com/id/1481902688/photo/party-decoration-various-colorful-balloons-flying-in-the-blue-sky-holiday-card-flat-lay-top.jpg?s=612x612&w=0&k=20&c=XKPrCICRBo5wYent1Nh3Lg3ZziSfC523F2FoOlMRsY0=",
    presenter: "Vedant",
    details: `
      <p>Given 4 choices, choose an item which can be used to burst the balloon and attain a special prize. Discover the mystery in which a balloon bursts but one doesn't.</p>
      <h4 style="margin-top:12px;font-weight:800;color:var(--cyan)">About Vedant</h4>
      <p>Vedant is a student of grade 8 who will challenge you and ask you some questions. Onwards he will reveal his magic & chemistry behind it, to let you understand how the balloon isn't magical, the chemistry behind it is magical. He is a shy boy.</p>
    `
  },
  ink: {
    title: "pH with Invisible Ink",
    img: "https://i.ebayimg.com/images/g/Oe8AAOSwkGlc-fNN/s-l1200.jpg",
    presenter: "Vihaan",
    details: `
      <p>Magic? Invisible ink! Dive into the world of chemistry as it surprises you with an invention or rather an accidental discovery that led to the formation of what we now call invisible ink.</p>
      <h4 style="margin-top:12px;font-weight:800;color:var(--cyan)">About Vihaan</h4>
      <p>Vihaan is a student of grade 8 who will explain to you how this act works and reveal the chemistry that lies behind it. He is a very naughty and mischievous boy.</p>
    `
  },
  caramel: {
    title: "Caramelization",
    img: "https://img.freepik.com/premium-photo/abstract-background-pattern-minimalistic-wave-clean-simple-modern-texture-colorful-shapes_941600-389761.jpg",
    presenter: "Arjun, Pranit, Ridhik",
    details: `
      <p>Today we will be exploring the flavourful side of chemistry. The part where your kitchen secretly turns into a chemistry lab. The only reaction where sugar can convert into heaven or hell depending on your timing.</p>
      <h4 style="margin-top:12px;font-weight:800;color:var(--cyan)">About The Trio</h4>
      <p>The trio are students of grade 9 who will test your taste buds to see whether you like caramel or not. They are very bad students, and often make mistakes so keep your eyes sharp!</p>
    `
  },
  biscuit: {
    title: "Pricking Balloon & Floating Biscuit",
    img: "https://www.shutterstock.com/image-photo/sandwich-cookie-falling-into-milk-600nw-2369471729.jpg",
    presenter: "Heril",
    details: `
      <p>A biscuit floats then the same sinks. How? Unravel the science, rather the chemistry behind it that performs this great phenomena. A challenge also lies ahead as you need to insert a needle inside a balloon without bursting it. Try it out. Gain some rewards if you win.</p>
      <h4 style="margin-top:12px;font-weight:800;color:var(--cyan)">About Heril</h4>
      <p>Heril is a student of grade 8 who is the master of challenges and tricks that can deceive your eyes. He will later explain the chemistry behind his tricks. Heril doesn't speak much.</p>
    `
  }
};

function openExperimentModal(key) {
  const exp = EXPERIMENTS[key];
  if (!exp) return;
  const modal = document.getElementById('experimentModal');
  const content = document.getElementById('experimentModalContent');
  content.innerHTML = `
    <div style="display:flex;align-items:center;gap:18px;">
      <img src="${exp.img}" alt="${exp.title}" style="width:80px;height:80px;border-radius:14px;object-fit:cover;">
      <div>
        <h2 style="font-size:24px;font-weight:900;color:var(--cyan);margin-bottom:4px;">${exp.title}</h2>
        <div class="muted" style="margin-bottom:10px;">Presented by: ${exp.presenter}</div>
      </div>
    </div>
    <div style="margin-top:18px;color:rgba(230,247,255,0.92);line-height:1.6;">
      ${exp.details}
    </div>
  `;
  modal.style.display = 'block';
  document.body.style.overflow = 'hidden';
  // Add ripple and spark effect
  const x = window.innerWidth / 2, y = window.innerHeight / 2;
  if (typeof createRipple === 'function') createRipple(x, y, '#66e7ff', 600, 900);
  if (typeof triggerElectricSpark === 'function') triggerElectricSpark(modal);
}

function closeExperimentModal() {
  document.getElementById('experimentModal').style.display = 'none';
  document.body.style.overflow = 'auto';
}

// Close modal when clicking outside content
document.getElementById('experimentModal').addEventListener('click', function(e) {
  if (e.target === this) closeExperimentModal();
});

// Close modal with Escape key
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') closeExperimentModal();
});
</script>

  <!-- SCHEDULE -->
  <section id="schedule" class="mb-12 reveal">
    <h2 style="font-size:22px;font-weight:900;color:#e6f7ff">Event Schedule</h2>
    <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px">
      <div class="panel">9:00 AM — Opening Ceremony & Keynote</div>
      <div class="panel">10:00 AM — Guided Exhibit Walkthrough</div>
      <div class="panel">12:30 PM — Lunch & Poster Talks</div>
      <div class="panel">2:00 PM — Interactive Demonstrations (Hands-on)</div>
      <div class="panel">4:00 PM — Awards & Closing Remarks</div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="mb-24 reveal">
    <div style="display:flex;gap:18px;align-items:center;justify-content:space-between;">
      <div>
        <h3 style="font-weight:900;color:#e6f7ff">Contact & Inquiries</h3>
        <p class="muted" style="margin-top:8px">For collaborations, media requests, or participation contact:</p>
        <div style="margin-top:8px;color:var(--cyan);font-weight:800">akshs2011@gmail.com</div>
      </div>
      <div class="panel">
        <div style="font-weight:900;color:var(--violet)">Venue</div>
        <div class="muted" style="margin-top:6px">Main campus — Exhibition Hall & Research Labs</div>
        <div style="font-weight:900;color:var(--violet);margin-top:12px">Organizers</div>
        <div class="muted" style="margin-top:6px">Department of Chemical Sciences</div>
      </div>
    </div>
  </section>

  <footer>© 2025 Chemistry Exhibition — Department of Chemical Sciences</footer>
</main>

<!-- TEAM MEMBER MODAL -->
<div id="teamModal" class="team-modal-overlay">
  <button class="team-modal-close" onclick="closeTeamModal()">×</button>
  <div id="teamModalContent" class="team-modal-content">
    <!-- Content will be populated by JavaScript -->
  </div>
</div>

<!-- DETAIL VIEW (single-file page content displayed here) -->
<section id="detailView" style="display:none; padding-top:120px; padding-bottom:80px; min-height:60vh; position:relative; z-index:50;">
  <div id="detailContent" style="max-width:1100px;margin:0 auto;padding:18px;"></div>
</section>

<!-- bio overlay (small faded window) -->
<div id="bioContainer" style="display:none;"></div>

<!-- modal (preview) -->
<div id="modal" style="display:none;position:fixed;inset:0;align-items:center;justify-content:center;background:rgba(2,6,23,0.75);z-index:180;padding:28px;">
  <div style="width:100%;max-width:880px;border-radius:12px;background:linear-gradient(180deg,#071022,#071426);border:1px solid rgba(255,255,255,0.04);padding:18px;color:#e6f7ff">
    <div style="display:flex;justify-content:space-between;align-items:center;">
      <div>
        <div id="modalTitle" style="font-weight:900;color:var(--cyan)"></div>
        <div id="modalSub" style="color:rgba(230,247,255,0.8);margin-top:6px">Quick preview</div>
      </div>
      <div><button onclick="closeModal()" style="padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:#e6f7ff">Close</button></div>
    </div>
    <div id="modalContent" style="margin-top:12px;color:rgba(230,247,255,0.9);line-height:1.6"></div>
  </div>
</div>

<script>
/* ----------------------------
  Electric Spark Effect System
-----------------------------*/
function createElectricSpark(startX, startY, endX, endY) {
  const sparkContainer = document.getElementById('sparkContainer');
  
  // Create main spark element
  const spark = document.createElement('div');
  spark.className = 'spark';
  spark.style.left = startX + 'px';
  spark.style.top = startY + 'px';
  
  // Calculate distance and angle
  const dx = endX - startX;
  const dy = endY - startY;
  const distance = Math.sqrt(dx * dx + dy * dy);
  const angle = Math.atan2(dy, dx) * (180 / Math.PI);
  
  // Create main spark line
  const sparkLine = document.createElement('div');
  sparkLine.className = 'spark-line';
  sparkLine.style.width = distance + 'px';
  sparkLine.style.height = '2px';
  sparkLine.style.transform = `rotate(${angle}deg)`;
  
  // Add particles along the spark line
  const particleCount = Math.floor(distance / 15);
  for (let i = 0; i < particleCount; i++) {
    const particle = document.createElement('div');
    particle.className = 'spark-particle';
    const pos = (i / particleCount) * distance;
    particle.style.left = pos + 'px';
    particle.style.top = '-1px';
    particle.style.width = Math.random() * 4 + 2 + 'px';
    particle.style.height = particle.style.width;
    particle.style.animation = `sparkAnimation ${Math.random() * 200 + 300}ms ease-out forwards`;
    sparkLine.appendChild(particle);
  }
  
  spark.appendChild(sparkLine);
  sparkContainer.appendChild(spark);
  
  // Animate the spark
  spark.style.animation = `sparkAnimation 500ms ease-out forwards`;
  
  // Remove spark after animation
  setTimeout(() => {
    spark.remove();
  }, 500);
}

function triggerElectricSpark(element) {
  const rect = element.getBoundingClientRect();
  
  // Create multiple sparks from different sides
  const sides = [
    { startX: rect.left, startY: rect.top, endX: rect.right, endY: rect.top }, // Top
    { startX: rect.right, startY: rect.top, endX: rect.right, endY: rect.bottom }, // Right
    { startX: rect.left, startY: rect.bottom, endX: rect.right, endY: rect.bottom }, // Bottom
    { startX: rect.left, startY: rect.top, endX: rect.left, endY: rect.bottom } // Left
  ];
  
  sides.forEach(side => {
    createElectricSpark(side.startX, side.startY, side.endX, side.endY);
  });
}

/* ----------------------------
  Background Music System
-----------------------------*/
let backgroundMusic = null;
let audioContext = null;
let analyser = null;
let dataArray = null;
let bufferLength = null;
let isPlaying = false;

function initAudio() {
  // Create audio context
  audioContext = new (window.AudioContext || window.webkitAudioContext)();
  
  // Create analyser for visualizer
  analyser = audioContext.createAnalyser();
  analyser.fftSize = 256;
  bufferLength = analyser.frequencyBinCount;
  dataArray = new Uint8Array(bufferLength);
  
  // Create audio element
  backgroundMusic = new Audio();
  backgroundMusic.loop = true;
  backgroundMusic.volume = 0.5;
  
  // Use a subtle ambient electronic track (simulated)
  // In a real implementation, you would load an actual audio file
  backgroundMusic.src = "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQ..."; // Placeholder
  
  // Create source and connect to analyser and destination
  const source = audioContext.createMediaElementSource(backgroundMusic);
  source.connect(analyser);
  analyser.connect(audioContext.destination);
  
  // Set up visualizer animation
  animateVisualizer();
}

function animateVisualizer() {
  if (!analyser) return;
  
  requestAnimationFrame(animateVisualizer);
  analyser.getByteFrequencyData(dataArray);
  
  const visualizer = document.getElementById('visualizer');
  if (!visualizer) return;
  
  const bars = visualizer.querySelectorAll('.visualizer-bar');
  for (let i = 0; i < bars.length; i++) {
    const value = dataArray[i * 2] / 255;
    const height = Math.max(5, value * 40);
    bars[i].style.height = `${height}px`;
  }
}

function playBackgroundMusic() {
  if (!backgroundMusic) {
    initAudio();
  }
  
  if (audioContext.state === 'suspended') {
    audioContext.resume();
  }
  
  backgroundMusic.play();
  isPlaying = true;
  document.getElementById('playBtn').style.display = 'none';
  document.getElementById('pauseBtn').style.display = 'flex';
}

function pauseBackgroundMusic() {
  if (backgroundMusic) {
    backgroundMusic.pause();
    isPlaying = false;
    document.getElementById('playBtn').style.display = 'flex';
    document.getElementById('pauseBtn').style.display = 'none';
  }
}

function setVolume(value) {
  if (backgroundMusic) {
    backgroundMusic.volume = value;
  }
}

// Audio control event listeners

/* ----------------------------
  Particle background canvas
-----------------------------*/
(() => {
  const canvas = document.getElementById('bg-canvas');
  const dpr = Math.max(1, window.devicePixelRatio || 1);
  let w, h, ctx, particles = [];

  function resize() {
    w = canvas.width = Math.max(document.documentElement.clientWidth, window.innerWidth) * dpr;
    h = canvas.height = Math.max(document.documentElement.clientHeight, window.innerHeight) * dpr;
    canvas.style.width = (w / dpr) + 'px';
    canvas.style.height = (h / dpr) + 'px';
    if(!ctx) ctx = canvas.getContext('2d');
  }

  function rand(min, max) { return Math.random() * (max - min) + min; }

  function initParticles() {
    particles = [];
    const count = Math.round((w / dpr) * (h / dpr) / 75000); // denser for dynamic feel
    for(let i=0;i<count;i++){
      particles.push({
        x: Math.random() * w,
        y: Math.random() * h,
        r: rand(1.2, 3.6) * dpr,
        vx: rand(-0.35, 0.35) * dpr,
        vy: rand(-0.22, 0.22) * dpr,
        hue: rand(180, 270)
      });
    }
  }

  function draw() {
    ctx.clearRect(0,0,w,h);
    // faint gradient vignette
    const grad = ctx.createRadialGradient(w*0.2, h*0.12, 0, w*0.5, h*0.5, Math.max(w,h));
    grad.addColorStop(0, 'rgba(124,58,237,0.02)');
    grad.addColorStop(1, 'rgba(0,0,0,0)');
    ctx.fillStyle = grad;
    ctx.fillRect(0,0,w,h);

    // lines
    for(let i=0;i<particles.length;i++){
      const p = particles[i];
      for(let j=i+1;j<particles.length;j++){
        const q = particles[j];
        const dx = p.x - q.x, dy = p.y - q.y;
        const dist = Math.sqrt(dx*dx + dy*dy);
        if(dist < 120 * dpr){
          const alpha = 0.12 * (1 - dist / (120*dpr));
          ctx.strokeStyle = `rgba(120,80,255,${alpha})`;
          ctx.lineWidth = 0.5 * dpr;
          ctx.beginPath();
          ctx.moveTo(p.x, p.y);
          ctx.lineTo(q.x, q.y);
          ctx.stroke();
        }
      }
    }

    // particles
    for(const p of particles){
      ctx.beginPath();
      const g = ctx.createRadialGradient(p.x - 1*p.r, p.y - 1*p.r, 0, p.x, p.y, p.r*2);
      g.addColorStop(0, 'rgba(0,216,255,0.9)');
      g.addColorStop(0.5, 'rgba(124,58,237,0.8)');
      g.addColorStop(1, 'rgba(0,0,0,0)');
      ctx.fillStyle = g;
      ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
      ctx.fill();
    }
  }

  function step() {
    for(const p of particles){
      p.x += p.vx;
      p.y += p.vy;
      if(p.x < -20*dpr) p.x = w + 20*dpr;
      if(p.x > w + 20*dpr) p.x = -20*dpr;
      if(p.y < -20*dpr) p.y = h + 20*dpr;
      if(p.y > h + 20*dpr) p.y = -20*dpr;
    }
    draw();
    requestAnimationFrame(step);
  }

  function start() { resize(); initParticles(); step(); }

  window.addEventListener('resize', () => { resize(); initParticles(); });
  start();
})();

/* ----------------------------
  Ripple / energy wave canvas + WebAudio for sounds
-----------------------------*/
const rippleCanvas = document.getElementById('ripple-canvas');
const rc = rippleCanvas.getContext ? rippleCanvas.getContext('2d') : null;
const DPR = Math.max(1, window.devicePixelRatio || 1);
let rw, rh;
function resizeRipple(){
  if(!rippleCanvas) return;
  rw = rippleCanvas.width = Math.max(document.documentElement.clientWidth, window.innerWidth) * DPR;
  rh = rippleCanvas.height = Math.max(document.documentElement.clientHeight, window.innerHeight) * DPR;
  rippleCanvas.style.width = (rw / DPR) + 'px';
  rippleCanvas.style.height = (rh / DPR) + 'px';
}
resizeRipple();
window.addEventListener('resize', resizeRipple);

let ripples = [];
function createRipple(x, y, color='#66f0ff', maxR=700, duration=900){
  ripples.push({x:x*DPR, y:y*DPR, t:performance.now(), maxR, color, duration});
  // schedule cleanup
  setTimeout(()=> {
    // remove old ones in draw loop
  }, duration + 50);
}
function drawRipples(){
  if(!rc) return;
  rc.clearRect(0,0,rw,rh);
  const now = performance.now();
  for(let i=ripples.length-1;i>=0;i--){
    const r = ripples[i];
    const elapsed = now - r.t;
    const progress = Math.min(1, elapsed / r.duration);
    const radius = r.maxR * easeOutCubic(progress);
    const alpha = 0.85 * (1 - progress);
    // radial gradient stroke
    rc.beginPath();
    rc.lineWidth = 6 * (1 - progress) + 1;
    rc.strokeStyle = hexToRgba(r.color, alpha);
    rc.arc(r.x, r.y, radius, 0, Math.PI*2);
    rc.stroke();
    if(progress >= 1) ripples.splice(i,1);
  }
}
function loopRipples(){
  drawRipples();
  requestAnimationFrame(loopRipples);
}
loopRipples();

function easeOutCubic(t){ return 1 - Math.pow(1 - t, 3); }
function hexToRgba(hex, a){ 
  // accept #rrggbb or rgb values
  if(hex.startsWith('#')) {
    const bigint = parseInt(hex.slice(1),16);
    const r = (bigint>>16)&255, g=(bigint>>8)&255, b=bigint&255;
    return `rgba(${r},${g},${b},${a})`;
  }
  return hex;
}
/* WebAudio: small sonic palette for energy wave + hum */
const AudioCtx = window.AudioContext || window.webkitAudioContext;
let energyAudioCtx = null;
function ensureAudio(){
  if(!energyAudioCtx) energyAudioCtx = new AudioCtx();
}
function playEnergySound(type='pulse'){
  ensureAudio();
  if(!energyAudioCtx) return;
  const now = energyAudioCtx.currentTime;
  // master gain
  const gain = energyAudioCtx.createGain(); gain.connect(energyAudioCtx.destination); gain.gain.value = 0.0001;
  // small fade-in to avoid clicks
  gain.gain.linearRampToValueAtTime(0.18, now + 0.01);
  // a short metallic chime + sub bass swoop
  if(type === 'pulse'){
    // metallic noise-ish with bandpass filter
    const o = energyAudioCtx.createOscillator();
    o.type = 'triangle';
    o.frequency.setValueAtTime(520, now);
    const g2 = energyAudioCtx.createGain(); g2.gain.value = 0.0;
    o.connect(g2);
    const hp = energyAudioCtx.createBiquadFilter(); hp.type='highpass'; hp.frequency.value=220;
    g2.connect(hp); hp.connect(gain);
    o.start(now);
    // envelope
    g2.gain.setValueAtTime(0.0001, now);
    g2.gain.exponentialRampToValueAtTime(0.9, now + 0.02);
    g2.gain.exponentialRampToValueAtTime(0.001, now + 0.6);
    o.frequency.exponentialRampToValueAtTime(180, now + 0.6);
    o.stop(now + 0.9);
  }
  // sub-swoop
  const sub = energyAudioCtx.createOscillator();
  sub.type = 'sine';
  sub.frequency.setValueAtTime(120, now);
  const subG = energyAudioCtx.createGain(); subG.gain.value = 0.0;
  sub.connect(subG); subG.connect(gain);
  subG.gain.setValueAtTime(0.0001, now);
  subG.gain.exponentialRampToValueAtTime(0.12, now + 0.03);
  subG.gain.exponentialRampToValueAtTime(0.0001, now + 0.7);
  sub.frequency.exponentialRampToValueAtTime(60, now + 0.6);
  sub.start(now); sub.stop(now + 0.9);

  // final tiny click
  setTimeout(()=> { gain.gain.exponentialRampToValueAtTime(0.0001, energyAudioCtx.currentTime + 0.02); }, 800);
}

/* ----------------------------
  Team Member Data
-----------------------------*/
const TEAM_MEMBERS = {
  'arjun': {
    name: 'Arjun Tosawad',
    role: 'President',
    imageLetter: 'AT',
    details: `
      <p>Arjun Tosawad leads the Chemistry Exhibition 2025 as President, bringing exceptional organizational skills and a deep passion for chemical sciences. With a focus on organic chemistry and public safety, Arjun ensures all demonstrations meet the highest standards of both educational value and safety protocols.</p>
      
      <p>His leadership extends beyond coordination to hands-on involvement in experiment design, particularly in the areas of green chemistry and sustainable synthesis methods. Arjun works closely with faculty mentors to develop engaging content that bridges theoretical concepts with real-world applications.</p>
      
      <p>Under his guidance, the team has implemented innovative safety measures and streamlined communication channels between different exhibit teams, resulting in a more cohesive and impactful exhibition experience for all visitors.</p>
    `
  },
  'samarth': {
    name: 'Samarth Jain',
    role: 'Secretary',
    imageLetter: 'SJ',
    details: `
      <p>Samarth Jain serves as Secretary, providing crucial organizational support and maintaining clear communication channels across all exhibition teams. His meticulous attention to detail ensures that documentation, scheduling, and resource allocation proceed smoothly.</p>
      
      <p>Samarth coordinates with external partners, manages participant registrations, and oversees the creation of educational materials distributed during the exhibition. His background in analytical chemistry brings precision to all administrative processes.</p>
      
      <p>Through his efforts, the exhibition maintains comprehensive records that support both current operations and future planning, while ensuring all stakeholders remain informed and engaged throughout the preparation process.</p>
    `
  },
  'vansh': {
    name: 'Vansh Mittal',
    role: 'Secretary',
    imageLetter: 'VM',
    details: `
      <p>Vansh Mittal works alongside Samarth as Secretary, focusing on visitor engagement and educational outreach. His role encompasses managing public relations, coordinating with school groups, and developing accessible chemistry content.</p>
      
      <p>With strong communication skills and a passion for science education, Vansh has developed innovative approaches to making complex chemical concepts understandable and exciting for diverse audiences. He oversees the creation of multilingual materials and accessibility accommodations.</p>
      
      <p>His dedication to inclusive science communication has expanded the exhibition's reach and ensured that chemistry education remains engaging and accessible to visitors of all backgrounds and age groups.</p>
    `
  },
  'aksh': {
    name: 'Aksh Sharma',
    role: 'IT & Tech Head',
    imageLetter: 'ASH',
    details: `
      <p>Aksh Sharma serves as IT & Tech Head for the Chemistry Exhibition, responsible for the planning, deployment, and operation of all technology systems.</p>
      
      <p> His role spans website development and maintenance, real-time AV and interactive displays, ambient audio and visualizers, and lightweight data collection for analytics and feedback.</p>
      
      <p>He works closely with faculty and student leads to translate exhibit concepts into reliable technical demos, applies pragmatic security and accessibility standards, and delivers onboarding and troubleshooting on event day to ensure a smooth visitor experience.</p>
    `
  }
};

/* ----------------------------
  Team Member Modal Functions
-----------------------------*/
function openTeamModal(memberId) {
  const member = TEAM_MEMBERS[memberId];
  if (!member) return;
  
  const modal = document.getElementById('teamModal');
  const content = document.getElementById('teamModalContent');
  
  content.innerHTML = `
    <div class="team-modal-image">
      ${member.imageLetter}
    </div>
    <div class="team-modal-info">
      <h2 style="font-size: 28px; font-weight: 900; color: var(--cyan); margin-bottom: 8px;">${member.name}</h2>
      <div style="font-size: 18px; color: var(--muted); margin-bottom: 20px;">${member.role}</div>
      <div style="color: rgba(230,247,255,0.9); line-height: 1.6; flex-grow: 1;">
        ${member.details}
      </div>
      <div style="margin-top: 20px;">
        <button class="btn btn-primary" onclick="playEnergySound()">Play Energy Sound</button>
      </div>
    </div>
  `;
  
  modal.style.display = 'block';
  document.body.style.overflow = 'hidden';
  
  // Add energy effect
  const x = window.innerWidth / 2;
  const y = window.innerHeight / 2;
  createRipple(x, y, '#66e7ff', 800, 1100);
  playEnergySound('pulse');
  
  // Add electric spark effect to modal
  const modalRect = modal.getBoundingClientRect();
  triggerElectricSpark(modal);
}

function closeTeamModal() {
  const modal = document.getElementById('teamModal');
  modal.style.display = 'none';
  document.body.style.overflow = 'auto';
}

// Close modal when clicking outside content
document.getElementById('teamModal').addEventListener('click', function(e) {
  if (e.target === this) {
    closeTeamModal();
  }
});

// Close modal with Escape key
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    closeTeamModal();
  }
});

/* ----------------------------
  SPA data for exhibits & exchange (detailed, "extreme")
-----------------------------*/
const PAGES = {
  // exhibits
  'chem-space': {
    title: 'Chemistry in Space',
    subtitle: 'Microgravity reactions, propellants, and life-support chemistry — deep field report',
    content: `
      <h3 style="font-weight:800;color:var(--cyan)">Overview</h3>
      <p class="muted">During this exhibit we present experiments and visual data exploring how gravity (or the lack of it) changes nucleation, crystal growth, diffusion-limited reactions and flame behavior. This page collects our experiment designs, raw imagery (placeholders), and stepwise analysis.</p>

      <h4 style="margin-top:12px;font-weight:800;color:var(--violet)">Experiment summaries</h4>
      <p class="muted">1) <strong>Crystallization under microgravity:</strong> comparative analysis with Earth-grown crystals. Observed: more isotropic morphologies, fewer defects for certain salts. Mechanistic notes on diffusion-limited aggregation and solvent transport.</p>
      <p class="muted">2) <strong>Combustion & flame chemistry:</strong> combustion in reduced convection — different soot formation routes, diffusion flame envelopes; implications for spacecraft fire safety and propellant engineering.</p>
      <p class="muted">3) <strong>Life-support chemistry:</strong> catalytic CO<sub>2</sub> scrubbing materials, water recovery sorbents and microbe-safe AEM membranes tested in bench-scale simulators.</p>

      <h4 style="margin-top:12px;font-weight:800;color:var(--violet)">Visuals & placeholders</h4>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:8px">
        <div class="panel photo-placeholder">Mission photo placeholder</div>
        <div class="panel photo-placeholder">Crystallization micrograph placeholder</div>
      </div>

      <h4 style="margin-top:12px;font-weight:800;color:var(--violet)">Takeaways</h4>
      <p class="muted">Microgravity offers unique parameter space: altered mass transport, suppressed convection, and novel nucleation pathways. For mission planning, this impacts propellant management, material synthesis and on-orbit manufacturing potential.</p>
    `
  },

  'green-chemistry': {
    title: 'Green Chemistry Revolution',
    subtitle: 'Low-waste syntheses, catalytic recycling, and life-cycle analysis (detailed field notes)',
    content: `
      <h3 style="font-weight:800;color:var(--cyan)">Overview</h3>
      <p class="muted">This exhibit documents multiple projects: solvent-free mechanochemical syntheses, recyclable heterogeneous catalysts, enzymatic cascade conversions, and cradle-to-gate life-cycle metrics comparing legacy versus green workflows.</p>

      <h4 style="margin-top:12px;font-weight:800;color:var(--violet)">Project highlights</h4>
      <p class="muted">• <strong>Mechanochemistry:</strong> ball-mill enabled couplings with near-zero solvent usage. Reaction profiles and energy consumption charts included as placeholders.</p>
      <p class="muted">• <strong>Biopolymer development:</strong> biodegradable polymer films from agricultural waste — tensile & thermal properties characterized.</p>
      <p class="muted">• <strong>Catalyst recovery:</strong> magnetic nanoparticle-supported catalysts enabling reuse with minimal leaching (ICP-MS checks).</p>

      <h4 style="margin-top:12px;font-weight:800;color:var(--violet)">Visuals & data</h4>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:8px">
        <div class="panel photo-placeholder">Process schematic placeholder</div>
        <div class="panel photo-placeholder">Life-cycle chart placeholder</div>
      </div>

      <h4 style="margin-top:12px;font-weight:800;color:var(--violet)">Impact</h4>
      <p class="muted">Quantified reductions in solvent use and waste generation, with practical suggestions for laboratory adoption of green protocols.</p>
    `
  },

  'forensic': {
    title: 'Forensic & Analytical Chemistry',
    subtitle: 'Crime-scene simulation, chromatography, mass spec and data interpretation (field report)',
    content: `
      <h3 style="font-weight:800;color:var(--cyan)">Overview</h3>
      <p class="muted">This exhibit demonstrates modern analytical techniques used in forensics: gas chromatography–mass spectrometry (GC–MS), liquid chromatography–tandem mass spectrometry (LC–MS/MS), and spectroscopy-based methods for trace evidence.</p>

      <h4 style="margin-top:12px;font-weight:800;color:var(--violet)">Demonstrations</h4>
      <p class="muted">• <strong>Chromatography:</strong> simulated sample separation with visualization of retention differences for volatile substances.</p>
      <p class="muted">• <strong>Mass spec:</strong> concept demo showing fragmentation patterns and library matching used to identify unknowns.</p>
      <p class="muted">• <strong>Evidence workflow:</strong> simulated chain-of-custody procedures and contamination prevention checks.</p>

      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:8px">
        <div class="panel photo-placeholder">Chromatogram placeholder</div>
        <div class="panel photo-placeholder">Instrument photo placeholder</div>
      </div>

      <h4 style="margin-top:12px;font-weight:800;color:var(--violet)">Field application</h4>
      <p class="muted">Visitors learn how analytical data supports investigations, and see the critical importance of sample handling, instrument calibration and interpretation rigor in forensic conclusions.</p>
    `
  },

  'polymer': {
    title: 'Polymer Art & Smart Materials',
    subtitle: 'Shape-memory systems, responsive polymers and wearable chemistry — demonstrated & documented',
    content: `
      <h3 style="font-weight:800;color:var(--cyan)">Overview</h3>
      <p class="muted">Interactive exhibits showing polymers that respond to heat, light or pH changes — shape-memory effects, soft robotics-inspired materials and interactive art pieces illustrating polymer chemistry.</p>

      <h4 style="margin-top:12px;font-weight:800;color:var(--violet)">Highlights</h4>
      <p class="muted">• <strong>Shape-memory demonstrations:</strong> programming & recovery cycles with temperature triggers.</p>
      <p class="muted">• <strong>Responsive hydrogels:</strong> swelling/deswelling visual demos and application notes for sensors.</p>
      <p class="muted">• <strong>Wearables:</strong> soft-conductive polymer leads for interactive garments (demo concept).</p>

      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:8px">
        <div class="panel photo-placeholder">Demo placeholder</div>
        <div class="panel photo-placeholder">Wearable sample placeholder</div>
      </div>
    `
  },

  'fireworks': {
    title: 'The Chemistry of Fireworks',
    subtitle: 'Pyrotechnic color chemistry — metal salts, oxidizers and safe demo design',
    content: `
      <h3 style="font-weight:800;color:var(--cyan)">Overview</h3>
      <p class="muted">Educational breakdown of how metal ions produce characteristic colors (Sr for red, Ba for green, Cu for blue, Na for yellow), and how oxidizers, binders and burn rates shape pyrotechnic performance. Safety and small-scale demonstration techniques are emphasized.</p>

      <h4 style="margin-top:12px;font-weight:800;color:var(--violet)">Ingredients & color mechanics</h4>
      <p class="muted">• <strong>Colorants:</strong> selective excitation & emission of metal cations in a hot flame environment; spectral explanation and demo spectra (placeholder).</p>
      <p class="muted">• <strong>Oxidizers & fuel balance:</strong> how oxidizer choices affect burn temperature & color purity.</p>

      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:8px">
        <div class="panel photo-placeholder">Color sample placeholder</div>
        <div class="panel photo-placeholder">Demo setup placeholder</div>
      </div>
    `
  },

  // exchange items
  'marble-factory': {
    title: 'Marble Factory Visit — Industrial Materials Report',
    subtitle: 'From limestone geology to marble polishing: a detailed industrial account',
    content: `
      <h3 style="font-weight:800;color:var(--cyan)">Overview</h3>
      <p class="muted">The team visited a working marble extraction & processing plant to study the chemistry and engineering of carbonate rock processing. Our notes cover mineralogy, quarrying, cutting, polishing, fabrication chemistry and waste handling.</p>

      <h4 style="margin-top:12px;font-weight:800;color:var(--violet)">What we observed</h4>
      <p class="muted"><strong>Geology:</strong> marble forms from metamorphism of limestone — primarily calcite (CaCO₃) — and often shows banding, recrystallization and impurity-driven coloration. We examined local strata and sampling protocols.</p>
      <p class="muted"><strong>Processing:</strong> block cutting uses diamond-wire saws; slurry containing fine CaCO₃ particulates is produced and must be treated. Polishing uses abrasive sequences and chemical sealants (polymeric sealants) to improve surface gloss and stain resistance.</p>

      <h4 style="margin-top:12px;font-weight:800;color:var(--violet)">Chemistry & environmental notes</h4>
      <p class="muted">Calcination (if practiced on-site for lime production) and slurry handling produce CO₂-related process streams; water recycling measures were discussed. Dust control (fine CaCO₃ particles) and occupational health practices were inspected.</p>

      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:8px">
        <div class="panel photo-placeholder">Quarry/photo placeholder</div>
        <div class="panel photo-placeholder">Polishing/fabrication placeholder</div>
      </div>

      <h4 style="margin-top:12px;font-weight:800;color:var(--violet)">Conclusions</h4>
      <p class="muted">Industrial chemistry at scale emphasizes materials handling, worker safety and waste-water management. The visit informed our materials exhibit sections and polymer sealant choices for sample displays.</p>
    `
  },

  'spain-forensics': {
    title: 'Spain Forensic Labs — International Exchange Report',
    subtitle: 'Laboratory methods, case work, and collaborative learning in Spanish forensic centers',
    content: `
      <h3 style="font-weight:800;color:var(--cyan)">Overview</h3>
      <p class="muted">Our delegation visited Spanish forensic research centers to observe modern analytical pipelines. We documented lab workflows, mass spectrometry best practices, DNA analysis pipelines, and chain-of-custody protocols across multiple units.</p>

      <h4 style="margin-top:12px;font-weight:800;color:var(--violet)">Lab techniques observed</h4>
      <p class="muted">• <strong>GC–MS / LC–MS workflows:</strong> sample prep, instrument calibration, and interpretation sessions with real-case anonymized datasets.</p>
      <p class="muted">• <strong>DNA & sequencing:</strong> high-throughput extraction, library prep, and sequence matching discussion for forensic genetics.</p>
      <p class="muted">• <strong>Digital forensics integration:</strong> how chemical evidence integrates with digital timelines and metadata in modern casework.</p>

      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:8px">
        <div class="panel photo-placeholder">Lab instrument photo placeholder</div>
        <div class="panel photo-placeholder">Chromatogram / data placeholder</div>
      </div>

      <h4 style="margin-top:12px;font-weight:800;color:var(--violet)">Reflections</h4>
      <p class="muted">International exchange highlighted protocol standardization, validation steps, and the role of cross-lab comparison studies. Students gained hands-on exposure to evidence workflows, instrument maintenance, and data integrity practices.</p>
    `
  },

  'cern': {
    title: 'CERN, Switzerland — Particle & Materials Interactions',
    subtitle: 'Detector materials, radiation chemistry and analytical detection — technical visit summary',
    content: `
      <h3 style="font-weight:800;color:var(--cyan)">Overview</h3>
      <p class="muted">At CERN we toured detector facilities and materials labs investigating how high-energy radiation interacts with materials. Focus areas included scintillator chemistry, radiation damage testing, and analytical detection of activation products.</p>

      <h4 style="margin-top:12px;font-weight:800;color:var(--violet)">Highlights</h4>
      <p class="muted">• <strong>Detector materials:</strong> scintillators, silicon detectors and polymer substrates were examined. Chemistry of dopants and wavelength-shifters used in scintillation media was discussed.</p>
      <p class="muted">• <strong>Radiation effects:</strong> materials testing under controlled irradiation to observe embrittlement, discoloration and changes in electronic properties.</p>
      <p class="muted">• <strong>Radiochemistry:</strong> measurement of activation products and safe handling procedures; analytical techniques used to quantify induced radioisotopes.</p>

      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:8px">
        <div class="panel photo-placeholder">Detector lab placeholder</div>
        <div class="panel photo-placeholder">Material test placeholder</div>
      </div>

      <h4 style="margin-top:12px;font-weight:800;color:var(--violet)">Learning outcomes</h4>
      <p class="muted">Students learned real-world applications of chemistry at extreme conditions, and how materials chemistry supports particle physics instrumentation and long-term detector performance.</p>
    `
  }
};

/* ----------------------------
  SPA navigation & transitions
-----------------------------*/
const mainView = document.getElementById('mainView');
const detailView = document.getElementById('detailView');
const detailContent = document.getElementById('detailContent');

function renderPage(key){
  const page = PAGES[key];
  if(!page) return;
  // push history
  history.pushState({page:key}, '', `#${key}`);
  // swap views
  mainView.style.display = 'none';
  detailView.style.display = 'block';
  detailContent.innerHTML = `
    <div class="panel detail-enter">
      <div style="display:flex;justify-content:space-between;align-items:flex-start;gap:18px">
        <div style="flex:1 1 64%">
          <h1 style="font-size:28px;font-weight:900;color:var(--cyan)">${page.title}</h1>
          <div style="margin-top:8px;color:rgba(230,247,255,0.88);font-weight:700">${page.subtitle}</div>
          <div style="margin-top:12px;color:rgba(230,247,255,0.92)">${page.content}</div>
        </div>
        <aside style="width:320px">
          <div class="panel">
            <div style="font-weight:900;color:var(--violet)">Quick Info</div>
            <div class="muted" style="margin-top:8px">Use the Back button to return to the main exhibit list. Media placeholders may be replaced later with high-resolution images.</div>
            <div style="margin-top:12px;display:flex;gap:8px;">
              <button class="btn btn-primary" onclick="playEnergySound();">Play energy</button>
              <button class="btn btn-ghost" onclick="goBack()">Back</button>
            </div>
          </div>
        </aside>
      </div>
    </div>
  `;
  // small entrance animation for placeholders (if any)
  detailView.scrollIntoView({behavior:'smooth', block:'start'});
  
  // Add electric spark effect to detail view
  const detailRect = detailView.getBoundingClientRect();
  triggerElectricSpark(detailView);
}

function goBack(){
  history.pushState({page:'main'}, '', location.pathname);
  detailView.style.display = 'none';
  mainView.style.display = 'block';
  window.scrollTo({top:0, behavior:'smooth'});
}

// handle browser back/forward
window.addEventListener('popstate', (e) => {
  const st = e.state;
  if(!st || st.page === 'main'){
    detailView.style.display = 'none';
    mainView.style.display = 'block';
  } else {
    renderPage(st.page);
  }
});

/* triggerEnergyAndOpen: ripple + sound + render page after short delay */
function triggerEnergyAndOpen(key){
  // calculate center of viewport for ripple
  const x = window.innerWidth * 0.5;
  const y = window.innerHeight * 0.28;
  createRipple(x, y, '#66e7ff', 800, 1100);
  playEnergySound('pulse');
  
  // Add electric spark effect to the clicked element
  const clickedElement = event.target.closest('.slide, .person');
  if (clickedElement) {
    triggerElectricSpark(clickedElement);
  }
  
  setTimeout(()=> renderPage(key), 380);
}

/* showDetail wrapper for older handlers */
function openDetail(key){ triggerEnergyAndOpen(key); }

/* small slider helper */
const slider = document.getElementById('slider');
function scrollSlider(dir){
  if(!slider) return;
  const step = slider.clientWidth * 0.78;
  slider.scrollBy({left: dir * step, behavior:'smooth'});
}

/* ----------------------------
  Bio overlay (small faded window for person/teacher)
-----------------------------*/
const BIOS = {
  'sankalp': {
    name: 'Mr. Sankalp Maheshwari',
    role: 'Professor of Organic Chemistry',
    bio: 'Mr. Maheshwari guides experimental design and safety protocols, with research in sustainable organic syntheses and color chemistry.',
    fun: 'Fun fact: Sankalp curated the fireworks color module for safe classroom demos.'
  },
  'ankita': {
    name: 'Mrs. Ankita Sharma',
    role: 'Associate Professor — Materials & Nanotechnology',
    bio: 'Mrs. Sharma mentors nanotech and materials exhibits; research includes nanoparticles for imaging and drug delivery.',
    fun: 'Fun fact: Ankita runs a microscopy club for undergraduates.'
  },
  'sudeep': {
    name: 'Mr. Sudeep Chaubey',
    role: 'Lecturer — Physical & Analytical Chemistry',
    bio: 'Mr. Sudeep leads forensic demonstrations and spectroscopy workshops, with an emphasis on analytical rigor and hands-on data interpretation.',
    fun: 'Fun fact: Sudeep designs mini forensic puzzles for visitors.'
  }
};

const bioContainer = document.getElementById('bioContainer');

function openBio(key){
  const p = BIOS[key];
  if(!p) return;
  // remove existing
  bioContainer.innerHTML = '';
  bioContainer.style.display = 'block';
  const el = document.createElement('div');
  el.className = 'bio-overlay detail-enter';
  el.innerHTML = `
    <div style="display:flex;justify-content:space-between;align-items:start;gap:12px;">
      <div>
        <div style="font-weight:900;color:var(--cyan)">${escapeHtml(p.name)}</div>
        <div class="muted" style="margin-top:6px"><strong>${escapeHtml(p.role)}</strong></div>
        <p style="margin-top:10px;color:rgba(230,247,255,0.9)">${escapeHtml(p.bio)}</p>
        <div style="margin-top:8px;color:rgba(230,247,255,0.78);font-weight:700">${escapeHtml(p.fun)}</div>
      </div>
      <div style="display:flex;flex-direction:column;gap:8px;">
        <button class="btn btn-primary" onclick="playEnergySound()">Listen</button>
        <button class="btn btn-ghost" onclick="closeBio()">Close</button>
      </div>
    </div>
  `;
  bioContainer.appendChild(el);
  // small ripple from bottom-right
  const x = window.innerWidth - 120, y = window.innerHeight - 120;
  createRipple(x, y, '#b79bff', 420, 900);
  playEnergySound('pulse');
  
  // Add electric spark effect to bio overlay
  triggerElectricSpark(el);
}

function closeBio(){
  bioContainer.innerHTML = '';
  bioContainer.style.display = 'none';
}

/* ----------------------------
  Modal preview
-----------------------------*/
function openModal(title, content){
  const modal = document.getElementById('modal');
  document.getElementById('modalTitle').textContent = title;
  document.getElementById('modalContent').innerHTML = content || '<p>No preview</p>';
  modal.style.display = 'flex';
}
function closeModal(){
  document.getElementById('modal').style.display = 'none';
}

/* ----------------------------
  small utility functions
-----------------------------*/
function escapeHtml(s){ return (s||'').toString().replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

/* playEnergySound triggers WebAudio; allowed without permission because on-user interaction */
function playEnergySound(){ playEnergySoundImpl(); }
function playEnergySoundImpl(){
  // call the earlier defined function in the outer scope
  if(typeof window !== 'undefined' && window && window.AudioContext) {
    try { playEnergySound('pulse'); } catch(e) { /* ignore if audio blocked */ }
  }
}

/* wire nav links to scroll (keyboard accessible) */
document.querySelectorAll('.navlink').forEach(a=>{
  a.addEventListener('click', (e)=>{
    e.preventDefault();
    const dest = a.getAttribute('data-scroll');
    if(dest === 'home') window.scrollTo({top:0,behavior:'smooth'});
    else {
      const el = document.getElementById(dest);
      if(el) el.scrollIntoView({behavior:'smooth', block:'start'});
    }
  });
});

/* Explore button scroll */
document.getElementById('exploreBtn').addEventListener('click', ()=> {
  const el = document.getElementById('exhibits');
  if(el) el.scrollIntoView({behavior:'smooth', block:'start'});
});

/* If loaded with hash for a page, open it on load */
window.addEventListener('DOMContentLoaded', ()=>{
  const hash = location.hash.replace('#','');
  if(hash && (hash in PAGES)){
    // open that page
    setTimeout(()=> {
      renderPage(hash);
    }, 200);
  } else {
    // reveal in sequence
    document.querySelectorAll('.reveal').forEach((el,i)=> setTimeout(()=> el.classList.add('show'), i*80));
  }
  
  // Initialize audio system
  initAudio();
});

/* Ensure audio context created only on user gesture (some browsers block auto audio if not) */
document.addEventListener('click', function one(){ 
  if(!window.AudioContext && !window.webkitAudioContext) return;
  // create audio context lazily via a short oscillator and stop
  try{
    if(!window._audioPrimed){
      window._audioPrimed = true;
      if(!window.audioPrimedCtx) window.audioPrimedCtx = new (window.AudioContext || window.webkitAudioContext)();
      const ctx = window.audioPrimedCtx;
      const o = ctx.createOscillator(); const g = ctx.createGain();
      o.connect(g); g.connect(ctx.destination);
      g.gain.value = 0.00001; o.start(); g.gain.exponentialRampToValueAtTime(0.00001, ctx.currentTime + 0.01); o.stop(ctx.currentTime + 0.02);
    }
  }catch(e){}
  document.removeEventListener('click', one);
}, {once:true});

/* small safety: if location hash is a known page, replace state to use SPA */
window.addEventListener('load', ()=>{
  const h = location.hash.replace('#','');
  if(h && (h in PAGES)){
    history.replaceState({page:h}, '', `#${h}`);
  } else {
    history.replaceState({page:'main'}, '', location.pathname);
  }
});
</script>
</body>
</html>
